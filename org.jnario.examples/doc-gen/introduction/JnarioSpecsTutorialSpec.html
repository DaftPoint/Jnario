<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Jnario Specs - Tutorial</title>
<meta name="description" content="">
<meta name="author" content="Jnario">

<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Le styles -->
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="../css/custom.css">
<link rel="stylesheet" href="../css/prettify.css">
<script type="text/javascript" src="../js/prettify.js"></script>
<script type="text/javascript" src="../js/lang-jnario.js"></script>
</head>

<body onload="prettyPrint()">
	<div class="container">
		<div class="content">
			<div class="page-header">
				<h1>Jnario Specs - Tutorial</h1>
			</div>
			<div class="row">
				<div class="span12">
					<p></p>
<h3>How to write a Specification</h3>
<div class="level">
<p></p>
<h4>A simple specification</h4>
<p>
<p><em>Note:</em> You can declare packages and import other packages similar to Java (static imports work as well).</p>
<pre class="prettyprint lang-jnario">
package demo

import java.util.Stack

describe "A Stack"{
  - "initially empty"{
    assert new Stack().size == 0	
  }
  - "increases its size"{
    val subject = new Stack&lt;String&gt;()
    subject.add("A String")
    assert subject.size == 1
  }
  // ...
}</pre>
</p>
<h4>Hierarchical Specifications</h4>
<p>
<p>The following specification will be executed as:</p>
<pre class="prettyprint">Calculator
  - addition
    - adds two values
  - division
    - divides two values
</code></pre>
<pre class="prettyprint lang-jnario">
describe "Calculator"{
  context "addition"{
    it "adds two values"{
      assert new Calculator().add(1, 2) == 3
    }
  }
  context "division"{
    it "divides two values"{
      assert new Calculator().divide(4, 2) == 2
    }
  }
}</pre>
</p>
<h4>Helper methods and fields</h4>
<p>
<pre class="prettyprint lang-jnario">
describe "Helper Methods & Fields"{

  String subject = "World" 

  it "can access fields and methods"{
    assert subject.greeting == "Hello World"
  }
  
  def greeting(String s){
    return "Hello " + s
  }

  context "shouting"{
    
    it "can access fields and methods from parent"{
       assert subject.greeting.shout == "HELLO WORLD"
    }
    
    def shout(String s){
      return s.toUpperCase
    }
  }
}</pre>
</p>
<h4>Pending [PENDING]</h4>
<p>
</div>
<h3>Setup and Teardown</h3>
<div class="level">
<p></p>
</div>
<h3>Writing Assertions</h3>
<div class="level">
<p><p>Jnario provides different ways to write assertions.</p>
</p>
<h4>'assert'</h4>
<p>
<p>Jnario provides a special <code>assert</code> statement that makes it easy to write meaningful assertions.</p>
<pre class="prettyprint lang-jnario">
assert true
assert 1 == 1
assert "Hello".startsWith("H")</pre>
</p>
<h4>'should', 'must' and `=>`</h4>
<p>
<p>If you want to express how an object should behave, you can use <code>should</code> or <code>must</code>. It passes if the result of the left expression is equal to the result of the right expression. You can also use <code>not</code> to assert that both expressions have different results. There is also a short cut available: <code>=&gt;</code> which has the same effect as <code>should be</code>.</p>
<pre class="prettyprint lang-jnario">
true should be true
"hello" must be "hello"
1 + 1 should not be 1 
"hello".toUpperCase must not be "hello"
1 + 1 =&gt; 2</pre>
</p>
<h4>Self-explaining failures</h4>
<p>
<p>Assertions in Jnario are selfexplainable. This means, when failing, they try to provide as as much information as possible. In that case, they print the exact expression that has failed together with the actual value of all subexpressions.</p>
<pre class="prettyprint lang-jnario">
val x = 0 
val y = 1 
errorMessage[assert x == 1 && y == 0].is('''
  Expected x == 1 && y == 0 but:
       x == 1 is false
       x is 0
       y == 0 is false
       y is 1''')
       
val greeting = "hello"        
errorMessage[greeting.toUpperCase should not be "HELLO"].is('''
  Expected x.toUpperCase should not be "HELLO" but:
     x.toUpperCase is "HELLO"
     x is "hello"''')</pre>
</p>
<h4>Expecting Exceptions</h4>
<p>
<p>There are two ways on how to check whether an expression is thrown. The first one is to declare the type the expected Exception in the example header after the <code>throws</code> keyword. If you want to check for multiple exceptions in the same example, you can use the build in <code>expect</code> extension method. The first parameter is the type of the expected exception and the second parameter is a closure with the expression that should throw the exception.</p>
<pre class="prettyprint lang-jnario">
describe "Division"{
  it throws ArithmeticException "on division by zero"{
    val x = 1 / 0
  }
  it "throws an ArithmeticException on division by zero"{
    expect(typeof(ArithmeticException))[
      val x = 1 / 0
    ]
   }
 }</pre>
</p>
</div>
<h3>Using Example Tables</h3>
<div class="level">
<p></p>
<h4>Writing Assertions [PENDING]</h4>
<p>
<h4>Specifying the Column Type [PENDING]</h4>
<p>
</div>
<h3>Type-safe specifications</h3>
<div class="level">
<p></p>
<h4>Describing Java Classes [PENDING]</h4>
<p>
<h4>Describing Java Methods [PENDING]</h4>
<p>
<h4>Implicit Subject Creation [PENDING]</h4>
<p>
</div>
<h3>Spec extensions</h3>
<div class="level">
<p></p>
</div>
				</div>
			</div>
		</div> <!-- /content -->
		<footer>
			<p><small>Generated by <a href="http://www.jnario.org">Jnario</a>.</small></p>
		</footer>

	</div>
	<!-- /container -->

</body>
</html>
