<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Game of Life</title>
<meta name="description" content="">
<meta name="author" content="Jnario">

<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Le styles -->
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="../css/custom.css">
<link rel="stylesheet" href="../css/prettify.css">
<script type="text/javascript" src="../js/prettify.js"></script>
<script type="text/javascript" src="../js/lang-jnario.js"></script>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/bootstrap-tab.js"></script>
</head>

<body onload="prettyPrint()">
  <div class="container">
    <div class="content">
      <div class="page-header">
        <h1>Game of Life</h1>
      </div>
      <div class="row">
        <div class="span12">
<div class="tabbable tabs-below"> <!-- Only required for left/right tabs -->
  <div class="tab-content">
  <div class="tab-pane active" id="tab1">
<h2 id="Rule">Rule</h2>
<div class="level">
<h3 id="EvolveLiveCells">EvolveLiveCells</h3>
<ul><li><p id="liveCells"><strong>LiveCells</strong></p>
<table class="table table-striped table-bordered table-condensed">
  <thead>
    <tr>
    <th>liveNeighbourCount</th>
    <th>result</th>
    </tr>
  </thead>
  <tbody>
  <tr>
    <td>1</td>
    <td>false</td>
  </tr>
  <tr>
    <td>2</td>
    <td>true</td>
  </tr>
  <tr>
    <td>3</td>
    <td>true</td>
  </tr>
  <tr>
    <td>4</td>
    <td>false</td>
  </tr>
  </tbody>
</table>
</li><li><p id="liveCells_forEach_subject_becomesAlive_liveNeighbourCount_result"><strong>liveCells.forEach[ subject.becomesAlive[liveNeighbourCount] => result ]</strong></p>
</li></ul>
</div>
<div class="level">
<h3 id="EvolveDeadCells">EvolveDeadCells</h3>
<ul><li><p id="deadcells"><strong>Deadcells</strong></p>
<table class="table table-striped table-bordered table-condensed">
  <thead>
    <tr>
    <th>liveNeighbourCount</th>
    <th>result</th>
    </tr>
  </thead>
  <tbody>
  <tr>
    <td>2</td>
    <td>false</td>
  </tr>
  <tr>
    <td>3</td>
    <td>true</td>
  </tr>
  <tr>
    <td>4</td>
    <td>false</td>
  </tr>
  </tbody>
</table>
</li><li><p id="deadcells_forEach_subject_becomesAlive_liveNeighbourCount_result"><strong>deadcells.forEach[ subject.becomesAlive[liveNeighbourCount] => result ]</strong></p>
</li></ul>
</div>
<h2 id="CellLocation">CellLocation</h2>
<div class="level">
<h3 id="adding_cell_locations">Adding cell locations</h3>
<ul><li><p id="cell_1_1_plus_cell_3_4_cell_2_5"><strong>cell[-1, 1].plus[cell[3,4]] => cell[2,5]</strong></p>
</li></ul>
</div>
<div class="level">
<h3 id="neighbours">Neighbours</h3>
<ul><li><p id="are_adjacent_cells"><strong>are adjacent cells</strong></p>
<pre class="prettyprint lang-spec">
val cell = cell(5, 5)
val expectedNeighbours = set(
  cell(4, 6), cell(5, 6), cell(6, 6), 
  cell(4, 5),             cell(6, 5), 
  cell(4, 4), cell(5, 4), cell(6, 4)
)
cell.neighbours =&gt; expectedNeighbours</pre>
</li></ul>
</div>
<h2 id="World">World</h2>
<div class="level">
<h3 id="deadCells">DeadCells</h3>
<ul><li><p id="with_no_live_cells_there_are_no_dead_cells"><strong>with no live cells there are no dead cells</strong></p>
<pre class="prettyprint lang-spec">
worldWith(emptyList).deadCells =&gt; emptySet</pre>
</li><li><p id="with_a_live_cell_all_neighbours_are_dead_cells"><strong>with a live cell all neighbours are dead cells</strong></p>
<pre class="prettyprint lang-spec">
worldWithLiveCell.deadCells =&gt; livingCell.neighbours</pre>
</li><li><p id="with_a_live_cell_all_non_living_neighbours_are_dead_cells"><strong>with a live cell all non-living neighbours are dead cells</strong></p>
<pre class="prettyprint lang-spec">
worldWithTwoLiveNeighbours.deadCells =&gt; allNonLivingNeighbours</pre>
</li></ul>
</div>
<div class="level">
<h3 id="livingNeighbours_CellLocation">LivingNeighbours[CellLocation]</h3>
<ul><li><p id="returns_number_of_live_neighbours"><strong>returns number of live neighbours</strong></p>
<pre class="prettyprint lang-spec">
worldWithTwoLiveNeighbours.livingNeighbours(livingCell) =&gt; 1</pre>
</li></ul>
</div>
<h2 id="Evolution">Evolution</h2>
<div class="level">
<h3 id="dead_cells">Dead cells</h3>
<ul><li><p id="become_alive_if_rule_says_so"><strong>become alive if rule says so</strong></p>
<pre class="prettyprint lang-spec">
val evolution = new Evolution(dontCare, allDeadLive)
evolution.evolve(worldWithLiveCell).livingCells =&gt; livingCell.neighbours</pre>
</li></ul>
</div>
<div class="level">
<h3 id="live_cells">Live cells</h3>
<ul><li><p id="stay_alive_if_rule_says_so"><strong>stay alive if rule says so</strong></p>
<pre class="prettyprint lang-spec">
val evolution = new Evolution(allLiveStayAlive, dontCare)
evolution.evolve(worldWithLiveCell).livingCells =&gt; set(livingCell)</pre>
</li></ul>
</div>
</div>
    <div class="tab-pane" id="tab2">
<pre class="prettyprint lang-spec">
package gameoflife

import gameoflife.Rule

import static gameoflife.CellLocation.*
import static gameoflife.World.*

describe "Game of Life"{
  
  val livingCell = cell(0,0)
  val anotherLivingCell = cell(1, 1)
  
  val worldWithLiveCell = worldWith(list(livingCell))
  val worldWithTwoLiveNeighbours = worldWith(list(livingCell, anotherLivingCell))
  
  describe Rule{
    describe EvolveLiveCells{
      def liveCells{
        | liveNeighbourCount | result |
        | 1             |   false      |
        | 2             |   true       |
        | 3             |   true       |
        | 4             |   false      |
      }
      fact liveCells.forEach[
        subject.becomesAlive(liveNeighbourCount) => result
      ]
    }
    describe EvolveDeadCells {
      def deadcells{
        | liveNeighbourCount | result |
        | 2              |   false      |
        | 3             |   true       |
        | 4             |   false      |
      }
      fact deadcells.forEach[
        subject.becomesAlive(liveNeighbourCount) => result
      ] 
    }
  }
  
  describe CellLocation{
    context "adding cell locations"{
      fact cell(-1, 1).plus(cell(3,4)) => cell(2,5)
    } 
    context neighbours {
      fact "are adjacent cells"{
        val cell = cell(5, 5)
        val expectedNeighbours = set(
          cell(4, 6), cell(5, 6), cell(6, 6), 
          cell(4, 5),             cell(6, 5), 
          cell(4, 4), cell(5, 4), cell(6, 4)
        )
        cell.neighbours => expectedNeighbours
      }
    }
  }
  
  describe World{
    context deadCells{
      fact "with no live cells there are no dead cells"{
        worldWith(emptyList).deadCells => emptySet
      }
      fact "with a live cell all neighbours are dead cells"{
        worldWithLiveCell.deadCells => livingCell.neighbours
      }
      fact "with a live cell all non-living neighbours are dead cells"{
        worldWithTwoLiveNeighbours.deadCells => allNonLivingNeighbours
      }
      
      def allNonLivingNeighbours(){
        val allNonLivingNeighbours = (livingCell.neighbours + anotherLivingCell.neighbours).toSet
        allNonLivingNeighbours.remove(anotherLivingCell)
        allNonLivingNeighbours.remove(livingCell)
        allNonLivingNeighbours
      }
    }
    context livingNeighbours{
      fact "returns number of live neighbours"{
        worldWithTwoLiveNeighbours.livingNeighbours(livingCell) => 1
      }
    }
  }
  
  describe Evolution{
    val Rule dontCare  = [false]
    context "dead cells"{
      val Rule allDeadLive = [true]
      fact "become alive if rule says so" {
        val evolution = new Evolution(dontCare, allDeadLive)
        evolution.evolve(worldWithLiveCell).livingCells => livingCell.neighbours
      }
    }  
    context "live cells"{
      val Rule allLiveStayAlive  = [true]
      fact "stay alive if rule says so" {
        val evolution = new Evolution(allLiveStayAlive, dontCare)
        evolution.evolve(worldWithLiveCell).livingCells => set(livingCell)
      }
    }
  }
}
</pre>  
    </div>
  </div>
  <ul class="nav nav-tabs">
    <li class="active"><a href="#tab1" data-toggle="tab">Spec</a></li>
    <li><a href="#tab2" data-toggle="tab">Source</a></li>
  </ul>
</div>
        </div>
      </div>
    </div> <!-- /content -->
    <footer>
      <p><small>Generated by <a href="http://www.jnario.org">Jnario</a>.</small></p>
    </footer>

  </div>
  <!-- /container -->

</body>
</html>
